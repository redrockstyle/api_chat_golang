<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>My LuckyChats</title>
        <link rel="icon" href="/static/images/favicon.png" />
        <link rel="stylesheet" type="text/css" href="/static/css/nes-core.min.css" />
        <link rel="stylesheet" type="text/css" href="/static/css/main.css" />
    </head>
    <body>
        <div class="parent-container">
            <div class="sidebar">
                <img class="main-logo" src="/static/images/logo.gif" />
                <p class="title-p">My LuckyChat<br /></p>
                <ul class="nav-bar">
                    <li><a href="/profile" class="nes-btn is-primary nav-li">Profile</a></li>
                    <li><a href="/chats" class="nes-btn is-primary nav-li">Chats</a></li>
                    
                    <li><a href="#" class="nes-btn is-primary nav-li" id="create-chat-btn">Create chat</a></li>
                    <!-- Add the modal HTML structure for create chat -->
                    <div class="nes-modal" id="create-chat-modal" style="display:none">
                      <div class="nes-modal-content">
                        <a href="#" class="nes-btn close-btn is-error" id="close-btn">Close</a>
                        <h2>Create a new chat</h2>
                        <label for="chat-name-input">Chat name:</label>
                        <input type="text" id="chat-name-input" class="nes-input" />
                        <button type="button" class="nes-btn is-primary" id="create-btn">Create</button>
                      </div>
                    </div>

                    <li><a href="#" class="nes-btn is-primary nav-li" id="follow-chat-btn">Follow chat</a></li>
                    <!-- Add the modal HTML structure for follow chat -->
                    <div class="nes-modal" id="follow-chat-modal" style="display:none">
                      <div class="nes-modal-content">
                        <a href="#" class="nes-btn close-btn is-error" id="follow-close-btn">Close</a>
                        <h2>Follow an existing chat</h2>
                        <label for="chat-name-input">Chat name:</label>
                        <input type="text" id="follow-chat-name-input" class="nes-input" />
                        <button type="button" class="nes-btn is-primary" id="follow-btn">Follow</button>
                      </div>
                    </div>
                    
                    <li><a href="/logout" class="nes-btn is-primary nav-li">Logout</a></li>
                </ul>
            </div>
            <div class="main-area">
                {% for msg in messages %}
                <div class="post-arrangement">
                    <div class="nes-container is-post with-title">
                        <p class="title">
                            <span> {{ msg.id_user }}: </span>
                            <span> {{ msg.text|safe }} </span>
                        </p>
                    </div>
                </div>
                {% else %}
                <div class="post-arrangement">
                    <div class="nes-container is-post with-title">
                        <p class="title">No messages yet.</p>
                    </div>
                </div>
                {% endfor %}

                <label for="content-box" id="resp">Write to... (CTRL+Enter or press Send)</label>
                <textarea id="content-box" class="nes-textarea is-dark postbox-area"></textarea>
                <button type="button" class="nes-btn submit-btn" id="submit-btn">Send</button>
            </div>
        </div>

        <script type="text/javascript" src="/static/js/jquery-3.6.0.slim.min.js"></script>
        <script type="text/javascript" src="/static/js/messenger.js"></script>
        <script type="text/javascript" src="/static/js/modals.js"></script>
    </body>
</html>
